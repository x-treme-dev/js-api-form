(function(){function m(a){a={Options:a,jZipField:null,Fields:[],FieldsByLevels:{},BuildQueryUpTo:function(a){for(var c="",d=0,h=0;h<this.Fields.length;h++)if(e.IsLessOrEqualLevel(this.Fields[h].MinLevel,a.MinLevel)){var k=this.Fields[h].GetValue();if(0<k.length||this.Fields[h]===a)c+=e.GetLevelsSigns(this.Fields[h].Levels),c+="[",c+=e.EscapeQuery(k),c+="]",d+=k.length}else this.Fields[h].ClearValue();this.jZipField&&(a=this.jZipField.val(),c+=g.ZipLevel.sign,c=c+"["+e.EscapeQuery(a),c+="]",d+=a.length);
return 0<d?c:""},IsTailField:function(a){return null==e.Find(this.Fields,function(c){return e.IsLessLevel(a.MaxLevel,c.MinLevel)&&""!=c.GetValue()})},RefreshForm:function(a,c){this.ClearAllFields();for(var d=null,h=0;h<c.length;h++)d=this.FieldsByLevels[c[h].level],d.AppendValue(c[h].type+" "+c[h].name);d&&d!=a&&d.SetFocus(!0)},ClearAllFields:function(){for(var a=0;a<this.Fields.length;a++)this.Fields[a].ClearValue()},Init:function(){for(var a=this,c=0;c<this.Options.fields.length;c++)this.Fields.push(n(this,
this.Options.fields[c]));for(c=0;c<this.Fields.length;c++)for(Level in g.AddressLevels)e.IsLessOrEqualLevel(this.Fields[c].MinLevel,Level)&&e.IsLessOrEqualLevel(Level,this.Fields[c].MaxLevel)&&(this.FieldsByLevels[Level]=this.Fields[c]);void 0!==this.Options.zip_field&&(c=this.Options.zip_field.id,this.jZipField="string"==typeof c&&"#"!==c[0]&&"."!==c[0]?f("#"+c):f(c),this.jZipField.on("keyup"+g.EventsNamespace,function(){a.ClearAllFields()}),this.jZipField.on("input"+g.EventsNamespace,function(){a.ClearAllFields()}),
this.jZipField.on("change"+g.EventsNamespace,function(){a.ClearAllFields()}))},Dispose:function(){for(var a=0;a<this.Fields.length;a++)this.Fields[a].Dispose()}};a.Init();return a}function n(a,b){var c={Options:e.BuildFieldOptions(b,a.Options,"site/suggest/address"),AddressForm:a,Levels:b.levels,MinLevel:"",MaxLevel:"",EXT:{PrepareQuery:function(a){a="discrete";this.Options.obsolete_names&&(a+="|obsnames");this.Options.obsolete_objects&&(a+="|obsobjects");if(this.Options.house_search||!this.Options.stead_search)a+=
"|house";if(this.Options.stead_search||!this.Options.house_search)a+="|stead";return{query:this.AddressForm.BuildQueryUpTo(this),mode:a,addresslim:this.Options.limit,country:this.Options.country}},IsAllowedToSuggestOnFocus:function(){return this.AddressForm.IsTailField(this)&&this.Options.suggest_on_focus},IsAllowedQuery:function(a,c){var b=a.query&&0<a.query.length?!0:!1;b&&0==c.length&&(b=this.Options.suggest_on_empty);return b},OnChooseSuggestion:function(a){var c=[],c=a.a_machine?e.DecodeMachineAddress(a.a_machine):
a.f_machine?e.DecodeMachineAddress(a.f_machine):e.DecodeMachineAddress(a.machine);this.AddressForm.RefreshForm(this,c);this.Options.on_choose&&this.Options.on_choose.call(this.Options.on_choose_context,a);this.Options.on_fetch&&(c=f.extend({query:a.sign},this.AddressForm.Options.api_options),c.output=c.output?c.output+"|json":"json",this.Options.user&&(c.user=this.Options.user),f.ajax({type:"GET",url:this.Options.ahunter_url+"site/fetch/address",data:c,cache:!1,context:this,success:function(c){this.Options.on_fetch.call(this.Options.on_fetch_context,
a,c.address)}}))},SuggestionViewInList:function(a){return e.AddressSuggestionViewInList(a)},SuggestionViewInField:function(a){return a.value}},ClearValue:function(){this.ResetField("");this.ClearSuggestions()},AppendValue:function(a){var c=this.GetValue();c&&(c+=", ");this.ResetField(c+a)},Init:function(){this.MinLevel=g.AddressLevels.Flat.name;this.MaxLevel=g.AddressLevels.Region.name;for(var a=0;a<this.Levels.length;a++)e.IsLessLevel(this.Levels[a],this.MinLevel)&&(this.MinLevel=this.Levels[a]),
e.IsLessLevel(this.MaxLevel,this.Levels[a])&&(this.MaxLevel=this.Levels[a]);void 0===b.empty_msg&&this.MinLevel===g.AddressLevels.Flat.name&&(this.Options.empty_msg="")}};c.Init();var d=l(c.Options.id,c.Options.max_height,c.Options.z_index,c.Options.full_url,c.Options.empty_msg,c.Options.append_to,c.Options.on_edit,c.Options.on_edit_context,c.Options.api_options);return e.ExtendSuggester(d,c)}function q(a){a={Options:e.BuildFieldOptions(a,{},"site/suggest/address"),EXT:{PrepareQuery:function(a){a=
{query:a,addresslim:this.Options.limit,country:this.Options.country};var b="";this.Options.obsolete_names&&(b+="obsnames|");this.Options.obsolete_objects&&(b+="obsobjects|");if(this.Options.house_search||!this.Options.stead_search)b+="house|";if(this.Options.stead_search||!this.Options.house_search)b+="stead|";0<b.length&&(a.mode=b);return a},IsAllowedToSuggestOnFocus:function(){return this.Options.suggest_on_focus},OnChooseSuggestion:function(a){this.Options.on_choose&&this.Options.on_choose.call(this.Options.on_choose_context,
a);if(this.Options.on_fetch){var b=f.extend({query:a.sign},this.Options.api_options);b.output=b.output?b.output+"|json":"json";this.Options.user&&(b.user=this.Options.user);f.ajax({type:"GET",url:this.Options.ahunter_url+"site/fetch/address",data:b,cache:!1,context:this,success:function(b){this.Options.on_fetch.call(this.Options.on_fetch_context,a,b.address)}})}},SuggestionViewInList:function(a){return e.AddressSuggestionViewInList(a)},SuggestionViewInField:function(a){var b=null,b=a.a_machine?e.DecodeMachineAddress(a.a_machine):
a.f_machine?e.DecodeMachineAddress(a.f_machine):e.DecodeMachineAddress(a.machine);return e.AddressFieldsToString(b,!0)}},Init:function(){}};a.Init();var b=l(a.Options.id,a.Options.max_height,a.Options.z_index,a.Options.full_url,a.Options.empty_msg,a.Options.append_to,a.Options.on_edit,a.Options.on_edit_context,a.Options.api_options);return e.ExtendSuggester(b,a)}function r(a){a={Options:a,Fields:[],BuildQueryWithActiveField:function(a){return{active:a.Tag,last_name:this.GetFieldValue("last_name"),
first_name:this.GetFieldValue("first_name"),patronym:this.GetFieldValue("patronym")}},GetFieldValue:function(a){var c=e.Find(this.Fields,function(c){return c.Tag==a});return null!=c?c.GetValue():""},GetPerson:function(){for(var a={last_name:this.GetFieldValue("last_name"),first_name:this.GetFieldValue("first_name"),patronym:this.GetFieldValue("patronym"),full_name:""},c=0;c<this.Fields.length;c++)a.full_name.length&&this.Fields[c].GetValue().length&&(a.full_name+=" "),a.full_name+=this.Fields[c].GetValue();
return a},Init:function(){for(var a=0;a<this.Options.fields.length;a++)this.Fields.push(t(this,this.Options.fields[a]))},Dispose:function(){for(var a=0;a<this.Fields.length;a++)this.Fields[a].Dispose()}};a.Init();return a}function t(a,b){var c={Options:e.BuildFieldOptions(b,a.Options,"site/suggest/person"),PersonForm:a,Tag:b.tag,EXT:{PrepareQuery:function(a){return f.extend(this.PersonForm.BuildQueryWithActiveField(this),{personlim:this.Options.limit})},IsAllowedToSuggestOnFocus:function(){return this.Options.suggest_on_focus},
IsAllowedQuery:function(a,c){return 0<c.length},OnChooseSuggestion:function(a){this.Options.on_choose&&this.Options.on_choose.call(this.Options.on_choose_context,a);this.Options.on_fetch&&this.Options.on_fetch.call(this.Options.on_fetch_context,a,this.PersonForm.GetPerson())}},Init:function(){}};c.Init();var d=l(c.Options.id,c.Options.max_height,c.Options.z_index,c.Options.full_url,c.Options.empty_msg,c.Options.append_to,c.Options.on_edit,c.Options.on_edit_context,c.Options.api_options);return e.ExtendSuggester(d,
c)}function u(a){a={Options:e.BuildFieldOptions(a,{},"site/suggest/person"),EXT:{PrepareQuery:function(a){return{query:a,personlim:this.Options.limit}},IsAllowedToSuggestOnFocus:function(){return this.Options.suggest_on_focus},OnChooseSuggestion:function(a){this.Options.on_choose&&this.Options.on_choose.call(this.Options.on_choose_context,a);this.Options.on_fetch&&this.Options.on_fetch.call(this.Options.on_fetch_context,a,{full_name:a.value})}},Init:function(){}};a.Init();var b=l(a.Options.id,a.Options.max_height,
a.Options.z_index,a.Options.full_url,a.Options.empty_msg,a.Options.append_to,a.Options.on_edit,a.Options.on_edit_context,a.Options.api_options);return SolidSuggester=e.ExtendSuggester(b,a)}function v(a){a={Options:e.BuildFieldOptions(a,{},"site/suggest/company"),EXT:{PrepareQuery:function(a){a={query:a,mode:"",companylim:this.Options.limit,afilter:JSON.stringify(this.Options.filter)};if(this.Options.egrul_enable||!this.Options.egrip_enable)a.mode="egrul";this.Options.egrip_enable&&(a.mode+="|egrip");
return a},IsAllowedToSuggestOnFocus:function(){return this.Options.suggest_on_focus},OnChooseSuggestion:function(a){this.Options.on_choose&&this.Options.on_choose.call(this.Options.on_choose_context,a);if(this.Options.on_fetch){var b=f.extend({query:a.sign},this.Options.api_options);b.output=b.output?b.output+"|json":"json";this.Options.user&&(b.user=this.Options.user);f.ajax({type:"GET",url:this.Options.ahunter_url+"site/fetch/company",data:b,cache:!1,context:this,success:function(b){this.Options.on_fetch.call(this.Options.on_fetch_context,
a,b.company)}})}},SuggestionViewInList:function(a){return e.CompanySuggestionViewInList(a)},SuggestionViewInField:function(a){return a.name}},Init:function(){}};a.Init();var b=l(a.Options.id,a.Options.max_height,a.Options.z_index,a.Options.full_url,a.Options.empty_msg,a.Options.append_to,a.Options.on_edit,a.Options.on_edit_context,a.Options.api_options);return SolidSuggester=e.ExtendSuggester(b,a)}function w(a){a={Options:e.BuildFieldOptions(a,{},"site/suggest/bank"),EXT:{PrepareQuery:function(a){return{query:a,
mode:"",banklim:this.Options.limit,afilter:JSON.stringify(this.Options.filter)}},IsAllowedToSuggestOnFocus:function(){return this.Options.suggest_on_focus},OnChooseSuggestion:function(a){this.Options.on_choose&&this.Options.on_choose.call(this.Options.on_choose_context,a);if(this.Options.on_fetch){var b=f.extend({query:a.sign},this.Options.api_options);b.output=b.output?b.output+"|json":"json";this.Options.user&&(b.user=this.Options.user);f.ajax({type:"GET",url:this.Options.ahunter_url+"site/fetch/bank",
data:b,cache:!1,context:this,success:function(b){this.Options.on_fetch.call(this.Options.on_fetch_context,a,b.bank)}})}},SuggestionViewInList:function(a){return e.BankSuggestionViewInList(a)},SuggestionViewInField:function(a){return a.name}},Init:function(){}};a.Init();var b=l(a.Options.id,a.Options.max_height,a.Options.z_index,a.Options.full_url,a.Options.empty_msg,a.Options.append_to,a.Options.on_edit,a.Options.on_edit_context,a.Options.api_options);return SolidSuggester=e.ExtendSuggester(b,a)}
function x(a){a={Options:e.BuildFieldOptions(a,{},"site/suggest/fms"),EXT:{PrepareQuery:function(a){return{query:a,mode:"",fmslim:this.Options.limit}},IsAllowedToSuggestOnFocus:function(){return this.Options.suggest_on_focus},OnChooseSuggestion:function(a){this.Options.on_choose&&this.Options.on_choose.call(this.Options.on_choose_context,a);this.Options.on_fetch&&this.Options.on_fetch.call(this.Options.on_fetch_context,a)},SuggestionViewInList:function(a){return a.code+": "+a.canon_name},SuggestionViewInField:function(a){return a.canon_name}},
Init:function(){}};a.Init();var b=l(a.Options.id,a.Options.max_height,a.Options.z_index,a.Options.full_url,a.Options.empty_msg,a.Options.append_to,a.Options.on_edit,a.Options.on_edit_context,a.Options.api_options);return SolidSuggester=e.ExtendSuggester(b,a)}function y(a){a={Options:e.BuildFieldOptions(a,{},"site/suggest/company"),jAddressField:null,jPersonField:null,EXT:{PrepareQuery:function(a){var b="",e=g.CompanyFields.Name.sign;this.jAddressField?b+=g.CompanyFields.Address.sign+"["+this.jAddressField.val()+
"]":e+=g.CompanyFields.Address.sign;this.jPersonField?b+=g.CompanyFields.Person.sign+"["+this.jPersonField.val()+"]":e+=g.CompanyFields.Person.sign;var f="discrete";this.Options.egrul_enable&&(f+="|egrul");this.Options.egrip_enable&&(f+="|egrip");return{query:b+(e+"["+a+"]"),mode:f,companylim:this.Options.limit,afilter:JSON.stringify(this.Options.filter)}},ProcessedQueryForHighlight:function(a){var b="";this.jAddressField&&(b+=this.jAddressField.val()+" ");this.jPersonField&&(b+=this.jPersonField.val()+
" ");return b+a},IsAllowedToSuggestOnFocus:function(){return this.Options.suggest_on_focus},OnChooseSuggestion:function(a){this.Options.on_choose&&this.Options.on_choose.call(this.Options.on_choose_context,a);if(this.Options.on_fetch){var b=f.extend({query:a.sign},this.Options.api_options);b.output=b.output?b.output+"|json":"json";this.Options.user&&(b.user=this.Options.user);f.ajax({type:"GET",url:this.Options.ahunter_url+"site/fetch/company",data:b,cache:!1,context:this,success:function(b){this.Options.on_fetch.call(this.Options.on_fetch_context,
a,b.company)}})}},SuggestionViewInList:function(a){return e.CompanySuggestionViewInList(a)},SuggestionViewInField:function(a){return a.name}},Init:function(){void 0!==this.Options.company_address_id&&(this.jAddressField=e.GetField(this.Options.company_address_id));void 0!==this.Options.company_person_id&&(this.jPersonField=e.GetField(this.Options.company_person_id))}};a.Init();var b=l(a.Options.id,a.Options.max_height,a.Options.z_index,a.Options.full_url,a.Options.empty_msg,a.Options.append_to,a.Options.on_edit,
a.Options.on_edit_context,a.Options.api_options);return DiscreteSuggester=e.ExtendSuggester(b,a)}function l(a,b,c,d,h,k,l,m,n){a={EXT:{PrepareQuery:function(a){return{query:a}},ProcessedQueryForHighlight:function(a){return a},IsAllowedToSuggestOnFocus:function(){return!0},IsAllowedQuery:function(a,b){return a.query&&0<a.query.length&&0<b.length},OnEditField:function(a,b){l&&l.call(m,a,b)},OnChooseSuggestion:function(a){},SuggestionViewInList:function(a){return a.value},SuggestionViewInField:function(a){return a.value}},
jField:e.GetField(a),SuggestionsClass:"u-AhunterSuggestions",SuggestionClass:"u-AhunterSuggestion",SuggestionSpecialClass:"u-AhunterSpecialSuggestion",SuggestionMainValueClass:"u-AhunterSuggestionMainValue",SuggestionSubValueClass:"u-AhunterSuggestionSubValue",SelectedSuggestionClass:"u-AhunterSelectedSuggestion",EmptySuggestionClass:"u-AhunterEmptySuggestion",jSuggestions:f("<div></div>"),jAppendTo:"string"==typeof k&&"#"!==k[0]&&"."!==k[0]?f("#"+k):f(k),Suggestions:[],SelectedIndex:-1,UserValue:"",
ShownValue:"",IsHidden:!0,GetValue:function(){return this.jField.val()},SplitText:function(a,b){for(var c=/[\s\\\/,;.\-"'<>\[\]()*]/gi,d=0;d<a.length;){var e=c.exec(a),e=null!==e?e.index:a.length;d<e&&b(d,e);d=e+1}},FormatSuggestionValue:function(a){var b=this.EXT.ProcessedQueryForHighlight.call(this,this.UserValue),c=[];this.SplitText(b,function(a,d){c.push({word:b.substring(a,d).toLowerCase(),prefix:d==b.length})});var d="",g=0;this.SplitText(a,function(b,f){d+=a.substring(g,b);var h=a.substring(b,
f).toLowerCase(),p=e.Find(c,function(a,b){return a.word==h||a.prefix&&a.word==h.substring(0,a.word.length)});p?(d+="<strong>"+a.substring(b,b+p.word.length)+"</strong>",d+=a.substring(b+p.word.length,f)):d+=a.substring(b,f);g=f});d+=a.substring(g);d.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/&lt;(\/?strong)&gt;/g,"<$1>");return d},ShowSuggestions:function(){var a=!0;this.UpdatePosition();this.jSuggestions.empty();this.Suggestions||(this.Suggestions=
[]);if(0<this.Suggestions.length)for(var b=0;b<this.Suggestions.length;b++){var c=this.EXT.SuggestionViewInList(this.Suggestions[b]);"string"==typeof c&&(c={Lines:[c],Special:!1});var d=f("<div>");f("<div>"+this.FormatSuggestionValue(c.Lines[0])+"</div>").appendTo(d).addClass(this.SuggestionMainValueClass);for(var e=1;e<c.Lines.length;e++)f("<div>"+this.FormatSuggestionValue(c.Lines[e])+"</div>").appendTo(d).addClass(this.SuggestionSubValueClass);d.addClass(this.SuggestionClass);c.Special&&d.addClass(this.SuggestionSpecialClass);
d.appendTo(this.jSuggestions)}else h?f("<div>"+h+"</div>").appendTo(this.jSuggestions).addClass(this.EmptySuggestionClass):a=!1;a?(this.jSuggestions.show(),this.IsHidden=!1,this.HighliteSuggestion(this.SelectedIndex)):this.ClearSuggestions()},HideSuggestions:function(){this.jSuggestions.hide();this.IsHidden=!0},ClearSuggestions:function(){this.Suggestions=[];this.SelectedIndex=-1;this.jSuggestions.empty();this.HideSuggestions()},UpdatePosition:function(){var a=this.jField.position(),b=this.jField.offsetParent().offset(),
c=this.jAppendTo.offset(),d=a.left+(b.left-c.left),a=a.top+(b.top-c.top);this.jSuggestions.detach();this.jSuggestions.appendTo(this.jAppendTo);this.jSuggestions.css("position","absolute");this.jSuggestions.css("left",d);this.jSuggestions.css("top",a+this.jField.outerHeight());this.jSuggestions.css("width",this.jField.outerWidth())},NavigateSuggestions:function(a){var b=!1;a.which==g.Keys.ESC?(b=!0,this.ResetField(this.UserValue),this.HideSuggestions()):a.which==g.Keys.DOWN&&0<this.Suggestions.length?
(b=!0,this.IsHidden?(this.ShowSuggestions(),this.SelectSuggestion(this.SelectedIndex)):this.SelectSuggestion(this.SelectedIndex+1)):a.which==g.Keys.UP&&0<this.Suggestions.length?(b=!0,this.IsHidden?(this.ShowSuggestions(),this.SelectSuggestion(this.SelectedIndex)):this.SelectSuggestion(this.SelectedIndex-1)):a.which==g.Keys.ENTER&&!this.IsHidden&&0<=this.SelectedIndex?(b=!0,this.SelectSuggestion(this.SelectedIndex),this.ResetField(this.ShownValue),this.EXT.OnChooseSuggestion.call(this,this.Suggestions[this.SelectedIndex]),
this.ClearSuggestions()):a.which!=g.Keys.TAB||this.IsHidden||(0<=this.SelectedIndex?(this.SelectSuggestion(this.SelectedIndex),this.ResetField(this.ShownValue),this.EXT.OnChooseSuggestion.call(this,this.Suggestions[this.SelectedIndex])):this.ResetField(this.UserValue),this.ClearSuggestions());return!b},SelectSuggestion:function(a){this.SelectedIndex=-1>a?this.Suggestions.length-1:a>=this.Suggestions.length?-1:a;-1!=this.SelectedIndex?(this.ShownValue=this.EXT.SuggestionViewInField(this.Suggestions[this.SelectedIndex]),
this.jField.val(this.ShownValue)):this.ResetField(this.UserValue);this.HighliteSuggestion(this.SelectedIndex)},ResetField:function(a){this.ShownValue=this.UserValue=a;this.jField.val(a)},HighliteSuggestion:function(a){this.jSuggestions.children().removeClass(this.SelectedSuggestionClass);-1!=a&&a<this.Suggestions.length&&(a=this.jSuggestions.children().get(a),f(a).addClass(this.SelectedSuggestionClass))},UpdateSuggestions:function(a){var b=this.jField.val(),c=!1;this.ShownValue!=b&&(c=!0,this.EXT.OnEditField(this.ShownValue,
b));if(c||a){var e=this;e.ResetField(b);e.SelectedIndex=-1;a=this.EXT.PrepareQuery.call(this,b);this.EXT.IsAllowedQuery.call(this,a,b)?(b=f.extend({ahungest:g.Version},a,n),b.output=b.output?b.output+"|json":"json",f.ajax({type:"GET",url:d,data:b,cache:!1,context:this,success:function(a){e.Suggestions=a.suggestions;e.ShowSuggestions()}})):e.ClearSuggestions()}},SetFocus:function(a){var b=this.EXT.IsAllowedToSuggestOnFocus;a&&(this.EXT.IsAllowedToSuggestOnFocus=function(){return!1});this.jField.focus();
a&&(this.EXT.IsAllowedToSuggestOnFocus=b)},Init:function(){var a=this;this.ResetField(this.jField.val());this.jSuggestions.addClass(this.SuggestionsClass);this.jSuggestions.css("max-height",b);this.jSuggestions.css("z-index",c);this.jSuggestions.hide();this.UpdatePosition();this.jField.attr("autocomplete","off");this.jSuggestions.on("mouseover"+g.EventsNamespace,"."+this.SuggestionClass,function(){a.SelectedIndex=f(this).index();a.HighliteSuggestion(a.SelectedIndex)});this.jSuggestions.on("mouseout"+
g.EventsNamespace,function(){a.SelectedIndex=-1;a.HighliteSuggestion(a.SelectedIndex)});this.jSuggestions.on("mousedown"+g.EventsNamespace,"."+this.SuggestionClass,function(b){if(1==b.which)return a.SelectedIndex=f(this).index(),a.SelectSuggestion(a.SelectedIndex),a.ResetField(a.ShownValue),a.EXT.OnChooseSuggestion.call(a,a.Suggestions[a.SelectedIndex]),a.ClearSuggestions(),a.SetFocus(!0),!1});this.jField.on("keydown"+g.EventsNamespace,function(b){return a.NavigateSuggestions(b)});this.jField.on("keyup"+
g.EventsNamespace,function(){a.UpdateSuggestions()});this.jField.on("input"+g.EventsNamespace,function(){a.UpdateSuggestions()});this.jField.on("change"+g.EventsNamespace,function(){a.UpdateSuggestions()});this.jField.on("blur"+g.EventsNamespace,function(){a.IsHidden||(a.ResetField(a.UserValue),a.ClearSuggestions())});this.jField.on("focus"+g.EventsNamespace,function(){a.EXT.IsAllowedToSuggestOnFocus.call(a)&&a.UpdateSuggestions(!0)});f(window).on("resize"+g.EventsNamespace,function(){a.UpdatePosition()})},
Dispose:function(){this.jSuggestions.off(g.EventsNamespace);this.jField.off(g.EventsNamespace);f(window).off(g.EventsNamespace);this.jSuggestions.remove()}};a.Init();return a}var f=jQuery;window.AhunterSuggest={Address:{Discrete:function(a){var b={obj:null,deffered:!1};f(document).ready(function(){b.obj=m(a)});this.Running.push(b);return b},Solid:function(a){var b={obj:null,deffered:!1};f(document).ready(function(){b.obj=q(a)});this.Running.push(b);return b},Running:[]},Person:{Discrete:function(a){var b=
{obj:null,deffered:!1};f(document).ready(function(){b.obj=r(a)});this.Running.push(b);return b},Solid:function(a){var b={obj:null,deffered:!1};f(document).ready(function(){b.obj=u(a)});this.Running.push(b);return b},Running:[]},Company:{Discrete:function(a){var b={obj:null,deffered:!1};f(document).ready(function(){b.obj=y(a)});this.Running.push(b);return b},Solid:function(a){var b={obj:null,deffered:!1};f(document).ready(function(){b.obj=v(a)});this.Running.push(b);return b},Running:[]},Bank:{Solid:function(a){var b=
{obj:null,deffered:!1};f(document).ready(function(){b.obj=w(a)});this.Running.push(b);return b},Running:[]},FMS:{Solid:function(a){var b={obj:null,deffered:!1};f(document).ready(function(){b.obj=x(a)});this.Running.push(b);return b},Running:[]},Dispose:function(a){this.FindAndDispose(a,this.Address.Running);this.FindAndDispose(a,this.Person.Running);this.FindAndDispose(a,this.Company.Running);this.FindAndDispose(a,this.Bank.Running);this.FindAndDispose(a,this.FMS.Running);this.DisposeDeffered(this.Address.Running);
this.DisposeDeffered(this.Person.Running);this.DisposeDeffered(this.Company.Running);this.DisposeDeffered(this.Bank.Running);this.DisposeDeffered(this.FMS.Running)},FindAndDispose:function(a,b){var c=e.FindIndex(b,function(b){return a==b});-1!=c&&(b[c].obj?(b[c].obj.Dispose(),b.splice(c,1)):b[c].deffered=!0)},DisposeDeffered:function(a){for(var b=a.length-1;0<=b;b--)a[b].deffered&&a[b].obj&&(a[b].obj.Dispose(),a.splice(b,1))}};var g={Version:"3.5",EventsNamespace:".ahungest",AddressLevels:{Region:{name:"Region",
sign:"r",num:0},District:{name:"District",sign:"d",num:1},City:{name:"City",sign:"c",num:2},Place:{name:"Place",sign:"p",num:3},Site:{name:"Site",sign:"t",num:4},Street:{name:"Street",sign:"s",num:5},House:{name:"House",sign:"h",num:6},Building:{name:"Building",sign:"b",num:7},Structure:{name:"Structure",sign:"u",num:8},Flat:{name:"Flat",sign:"f",num:9}},ZipLevel:{name:"Zip",sign:"z"},CompanyFields:{Name:{name:"Name",sign:"n",num:0},Address:{name:"Address",sign:"a",num:1},Person:{name:"Person",sign:"p",
num:2}},Keys:{ESC:27,TAB:9,ENTER:13,UP:38,DOWN:40},DefaultOptions:{ahunter_url:"https://ahunter.ru/",empty_msg:"РќРµС‚ РїРѕРґС…РѕРґСЏС‰РµР№ РїРѕРґСЃРєР°Р·РєРё",limit:10,suggest_on_empty:!1,suggest_on_focus:!0,obsolete_names:!1,obsolete_objects:!1,z_index:9999,max_height:500,append_to:null,id:void 0,on_edit:void 0,on_edit_context:void 0,on_choose:void 0,on_choose_context:void 0,on_fetch:void 0,on_fetch_context:void 0,user:void 0,api_options:void 0,filter:void 0,company_address_id:void 0,company_person_id:void 0,egrul_enable:!0,
egrip_enable:!0,house_search:!0,stead_search:!0,country:""}},e={GetField:function(a){return"string"==typeof a&&"#"!==a[0]&&"."!==a[0]?f("#"+a):f(a)},FindIndex:function(a,b){for(var c=-1,d=0;d<a.length;d++)if(b(a[d])){c=d;break}return c},Find:function(a,b){var c=null,d=this.FindIndex(a,b);-1!=d&&(c=a[d]);return c},IsLessLevel:function(a,b){return g.AddressLevels[a].num<g.AddressLevels[b].num},IsLessOrEqualLevel:function(a,b){return g.AddressLevels[a].num<=g.AddressLevels[b].num},IsNumericLevel:function(a){return g.AddressLevels[a].num>=
g.AddressLevels.House.num},IsAddressLevel:function(a){return a in g.AddressLevels},FindAddressLevelBySign:function(a){var b="";for(Level in g.AddressLevels)if(g.AddressLevels[Level].sign==a){b=g.AddressLevels[Level].name;break}return b},GetLevelsSigns:function(a){for(var b="",c=0;c<a.length;c++)b+=g.AddressLevels[a[c]].sign;return b},EscapeQuery:function(a){return a.replace(/([\\\[\]])/g,"\\$1")},DecodeMachineAddress:function(a){for(var b=[],c=0,d="",f={name:"",type:"",level:g.AddressLevels.Region.name};c<
a.length;){if("\\"!=a[c]&&":"!=a[c]){var k=e.FindAddressLevelBySign(a[c]);""===k?d+=a[c]:(f.name=d,b.push(f),d="",f={name:"",type:"",level:k},f.level=k)}else"\\"==a[c]?(c++,c<a.length&&(d+=a[c])):":"==a[c]&&(f.type=d,d="");c++}0<d.length&&(f.name=d,b.push(f));return b},AddressFieldsDelta:function(a,b){for(var c=[],d=0,f=0;d<a.length&&f<b.length;)if(e.IsLessLevel(a[d].level,b[f].level))c.push(a[d]),d++;else if(e.IsLessLevel(b[f].level,a[d].level)){0<d&&d--;break}else a[d].type==b[f].type&&a[d].name==
b[f].name||c.push(a[d]),d++,f++;for(;d<a.length;)c.push(a[d]),d++;return c},AddressFieldsToString:function(a,b){for(var c=!1,d="",f=0;f<a.length;f++)d.length&&(d+=", "),d+=a[f].type+" "+a[f].name,e.IsNumericLevel(a[f].level)&&(c=!0);b&&!c&&(d+=", ");return d},AddressSuggestionViewInList:function(a){var b=a.value;if(a.f_machine||a.a_machine){var c=e.DecodeMachineAddress(a.machine),d=null,f="";a.f_machine&&(d=e.DecodeMachineAddress(a.f_machine),f=e.AddressFieldsDelta(d,c),f=e.AddressFieldsToString(f));
var g="";a.a_machine&&(a=e.DecodeMachineAddress(a.a_machine),c=e.AddressFieldsDelta(a,d?d:c),g=e.AddressFieldsToString(c));if(f||g)b+=" (",f&&(b+=" в†’ "+f),g&&(b+=" в‡’ "+g),b+=" )"}return b},CompanySuggestionViewInList:function(a){return{Lines:[a.name,a.address,a.ogrn+", РРќРќ: "+a.inn+(0<a.person.length?", "+a.person:"")],Special:0==a.state?!1:!0}},BankSuggestionViewInList:function(a){return{Lines:[a.name,a.address,"Р‘РРљ: "+a.bic+(0<a.ogrn.length?", РћР“Р Рќ: "+a.ogrn:"")],Special:0==a.state?!1:!0}},ExtendSuggester:function(a,
b){var c=a.EXT;f.extend(a,b);a.EXT=f.extend(c,b.EXT);return a},SelectDefined:function(){for(var a,b=0;b<arguments.length;b++)if(void 0!==arguments[b]){a=arguments[b];break}return a},BuildFieldOptions:function(a,b,c){var d={};for(Name in g.DefaultOptions)d[Name]=e.SelectDefined(a[Name],b[Name],g.DefaultOptions[Name]);"/"!=d.ahunter_url[d.ahunter_url.length-1]&&(d.ahunter_url+="/");d.append_to||(d.append_to=f(document.body));d.full_url=d.ahunter_url+c;return d}};window.AhunterSuggest.Utils=e})();